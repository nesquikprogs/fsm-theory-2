# Lab Work: Hockey AI Simulation - StackFSM Implementation

## Цель работы
Разработка ИИ игроков хоккейной команды с использованием **стекового конечного автомата (StackFSM)** для управления поведением в игре с шайбой.  
Система демонстрирует комбинированные состояния и приоритетное выполнение действий через стек.

## Основная идея

- Игровой цикл работает на **60 FPS** с помощью таймера.  
- Физика игроков реализована через класс **Boid**: движение через векторы скорости и силы.  
- Поведения:  
  - **Seek** — движение к цели (шайба или позиция)  
  - **Wander** — случайное блуждание  

- **Коллизии:**  
  - При столкновении игроков и шайбы — шайба может переходить к другому игроку с **30% шансом**.  
  - Расстояния: <20 — подбор шайбы, <30 — отталкивание с шансом отбора.  

## Состояния StackFSM

ИИ игроков использует **стековый конечный автомат** с шестью состояниями:

1. **Idle** — ожидание, блуждание или наблюдение за шайбой  
2. **PursuePuck** — преследование свободной шайбы  
3. **Attack** — атака ворот, если шайба у команды  
4. **StealPuck** — отбор шайбы у противника  
5. **CelebrateGoal** — празднование после забитого гола  
6. **SupportPuckCarrier** — поддержка носителя шайбы  

### Переходы между состояниями

- **Idle → PursuePuck:** шайба свободна, расстояние до шайбы < 150, игрок ближайший  
- **Idle → Attack:** шайба у своей команды  
- **Idle → StealPuck:** шайба у противника  
- **PursuePuck → Idle:** шайба далеко (>150) или игрок не ближайший  
- **CelebrateGoal:** после гола 2 секунды, затем возвращение в Idle  

### Роли игроков

- **Forward** — нападающий, преимущественно атакует ворота  
- **Defender** — защитник, преимущественно обороняет свою зону  

## Особенности реализации StackFSM

- **Стековое управление:** верхнее состояние в стеке выполняется при каждом обновлении (`Update`)  
- Позволяет **комбинировать состояния**, например Idle + Attack одновременно  
- Поведения автоматически переключаются по условиям и ролям игроков  

## Результат работы

- Игроки преследуют, атакуют, отбирают и поддерживают друг друга согласно ролям  
- Стековый FSM корректно управляет состояниями и переходами  
- Визуализированы столкновения и движения с использованием векторов  
- Демонстрация комбинации состояний через стек  

